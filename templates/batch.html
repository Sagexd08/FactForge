{% extends "base.html" %}

{% block title %}Batch Analysis - FactForge{% endblock %}

{% block content %}
<div class="text-center mb-4">
    <h1 class="display-5 fw-bold text-primary">
        <i class="fas fa-layer-group me-3"></i>Batch Analysis
    </h1>
    <p class="lead text-muted">Analyze multiple news articles simultaneously for efficient processing</p>
</div>

<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-upload me-2"></i>Batch News Analysis
                </h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-4">
                        <label for="texts" class="form-label fw-bold">
                            <i class="fas fa-list me-2"></i>News Articles (one per line)
                        </label>
                        <textarea class="form-control" id="texts" name="texts" rows="12"
                                 placeholder="Enter news articles here, one per line...

Example:
Scientists discover new planet made of chocolate
Federal Reserve announces interest rate decision
Local man claims pet goldfish speaks 17 languages"
                                 required style="border-radius: 10px; border: 2px solid #e5e7eb;"></textarea>
                        <div class="form-text">
                            <i class="fas fa-info-circle me-1"></i>
                            Enter up to 50 news articles, one per line. Each article should be at least 10 characters.
                        </div>
                        <div class="mt-2">
                            <small class="text-muted">
                                Lines: <span id="lineCount">0</span> |
                                Total Characters: <span id="totalChars">0</span>
                            </small>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-cogs me-2"></i>Analyze All Articles
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card bg-light">
                    <div class="card-body text-center">
                        <i class="fas fa-rocket text-primary" style="font-size: 2rem;"></i>
                        <h6 class="mt-2">Fast Processing</h6>
                        <small class="text-muted">Analyze up to 50 articles in seconds</small>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-light">
                    <div class="card-body text-center">
                        <i class="fas fa-download text-success" style="font-size: 2rem;"></i>
                        <h6 class="mt-2">Export Results</h6>
                        <small class="text-muted">Download results as CSV or JSON</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('texts').addEventListener('input', function() {
    const text = this.value;
    const lines = text.split('
').filter(line => line.trim().length > 0);
    document.getElementById('lineCount').textContent = lines.length;
    document.getElementById('totalChars').textContent = text.length;

    // Warn if too many lines
    if (lines.length > 50) {
        this.style.borderColor = '#dc2626';
        document.querySelector('.form-text').innerHTML =
            '<i class="fas fa-exclamation-triangle text-danger me-1"></i>Too many articles! Maximum 50 allowed.';
    } else {
        this.style.borderColor = '#e5e7eb';
        document.querySelector('.form-text').innerHTML =
            '<i class="fas fa-info-circle me-1"></i>Enter up to 50 news articles, one per line. Each article should be at least 10 characters.';
    }
});
</script>
{% endblock %}